<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/">

<head th:replace="~{navbar.html :: head}">
  <title>Gestion des duplicatas factures</title>
<body>
  <div th:replace="~{navbar.html :: nav_bar}"></div>
  <div class="container-parent">
    <div class="container-box">
      <div class="alert alert-secondary container-top">
        <h1 class="mb-3 text-center">Export invoices :</h1>
      </div>
      
      <div id="error" class="alert alert-danger container-bottom"></div>
    </div>
  </div>
  <script th:src="@{/js/jspdf.umd.min.js.js}" type="text/javascript"></script>
  <script>
    const { jsPDF } = window.jspdf;
      let img = new Image();
      img.src = '/img/electricity.jpg';
      let X = [140,155,164,173,136,136,136,145,127,54,66,79,66,40,63,90
      ,98,98,98,98,98,98
      ,118,118,118,118,118,118
      ,140,140,140,140,140,140
      ,178,178,178,178,178,178
      ,178,178,178
      ,140,140,140
      ,140,140,140,140,140];
      let Y = [11,11,11,11,18,28,33,41,53,20,29,29,36,47,47,47
      ,95,100,105,110,115,120
      ,95,100,105,110,115,120
      ,95,100,105,110,115,120
      ,95,100,105,110,115,120
      ,132,135,138
      ,132,135,138
      ,151,155,159,164,168];
      Y = Y.map(y => y + 4);
      img.onload = (e) => {
        function exportPDF(info) {
          let doc = new jsPDF();
          doc.addImage(img, 'jpg', 0, 0, 210, 297);
          doc.setFontSize(8);
          for (let i = 0; i < X.length; ++i) {
            doc.text(info[i], X[i], Y[i]);
          }
          doc.text("-",X[10]+10,Y[10])
          //doc.text("ADRESSE2",X[5],Y[5]+5);
          doc.save("invoice.pdf")
        }
        let info = ["LOC","SECT","TRN","ORD","NOM","ADRESSE","ADRESSE2","POLICE","NCOMPT","FACTUREN","MOIS","ANNE","USAGE","IDX1",
        "IDX2","CONS"
        ,"CONSTR1","CONSTR2","CONSTR3","CONSTR4","CONSTR5","CONSTR6"
        ,"PRIX1","PRIX2","PRIX3","PRIX4","PRIX5","PRIX6"
        ,"MNT1","MNT2","MNT3","MNT4","MNT5","MNT6"
        ,"MNTTVA1","MNTTVA2","MNTTVA3","MNTTVA4","MNTTVA5","MNTTVA6"
        ,"TVA_RDF","TVA_ENT","TVA_LOC"
        ,"RDF","TAXE_ENT","TAXE_LOC"
        ,"MNT_HT","TVA","TPPAN","TIMBRE","NET_APAYER"
        ];
        exportPDF(info);
      }
  </script>
</body>

</html>